<html lang="en" >

<head>

  <meta charset="UTF-8">
  
<title>testing geoJSON</title>
  
<!--jquery js-->
<script src="https://code.jquery.com/jquery-3.5.1.js" integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc=" crossorigin="anonymous"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>



<!--jQuery UI files-->
<link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css" />
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js" integrity="sha256-T0Vest3yCU7pafRw9r+settMBX6JkKN06dqBnpQ8d30=" crossorigin="anonymous"></script>

<!--jQuery UI Touch js, required for touchscreen use-->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui-touch-punch/0.2.3/jquery.ui.touch-punch.min.js"></script>
  
<!--leaflet files-->
 <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A==" crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js" integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA==" crossorigin=""></script>

  
<!--other files-->
<script src='https://rawgit.com/kartena/Proj4Leaflet/master/lib/proj4-compressed.js'></script>
<script src='https://kartena.github.io/Proj4Leaflet/src/proj4leaflet.js'></script>
<link rel="stylesheet" href="http://code.ionicframework.com/ionicons/1.5.2/css/ionicons.min.css">
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">
<script src="https://unpkg.com/proj4"></script>

  
<style>
body,
html {
  height: 99%;
}
  
#map {
  width: 100%;
  height: 100%;
}
</style>

  <script>
  window.console = window.console || function(t) {};
</script>

  
  
  <script>
  if (document.location.search.match(/type=embed/gi)) {
    window.parent.postMessage("resize", "*");
  }
</script>


</head>


  <div id="map"></div>


  
      <script id="rendered-js" >
var map = L.map('map').setView([41.461070584121636, -70.56516015402862], 14);
            L.tileLayer('https://{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png', {
		maxZoom: 20,
                attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',
            }).addTo(map);
	      
	      
proj4.defs("urn:ogc:def:crs:EPSG::26987", "+proj=lcc +lat_1=41.48333333333333 +lat_2=41.28333333333333 +lat_0=41 +lon_0=-70.5 +x_0=500000 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs");

   

$.getJSON("data/points_test.geojson")
    .then(function (geojson1) {
        var timesIcon = L.icon({
            iconUrl: 'icons/times-solid.svg',
            iconSize: [60, 50]
        });
        L.Proj.geoJson(geojson1, {
            pointToLayer: function (feature1, latlng) {
                var marker = L.marker(latlng, { icon: timesIcon });
                marker.bindPopup(feature1.properties.title + '<br/>' + feature1.properties.time + '<br/>' + feature1.properties.descript);
                return marker;
            }
        }).addTo(map);
  
  
  var info = L.control();
var geojson2;
	
info.onAdd = function (map) {
	this._div = L.DomUtil.create('div', 'info');
	this.update();
	return this._div;
	};

//will pull up anything put in props//

info.update = function (props) {
this._div.innerHTML = '<h4>Lot Information</h4>' +  (props ?
	'<b>' + props.title + '</b><br />' + props.time + ' date ' + '</b><br />' + props.discript + '</b><br />' : 'Hover over a lot');
};


info.addTo(map);  
  
  
	function style(feature) {
		return {
			weight: 2,
			opacity: 1,
			color: 'white',
			dashArray: '3',
			fillOpacity: 0.7,
			fillColor: 'green'
		};
	}
  
	function highlightFeature(e) {
		var layer = e.target;
		    
    layer.setStyle({
	weight: 5,
	color: '#666',
	dashArray: '',
	fillOpacity: 0.7
    });

		if (!L.Browser.ie && !L.Browser.opera && !L.Browser.edge) {
			layer.bringToFront();
		}

		info.update(layer.feature.properties);
	}
  

  
	function resetHighlight(e) {
		geojson2.resetStyle(e.target);
		info.update();
	}

	function zoomToFeature(e) {
		map.fitBounds(e.target.getBounds());
	}

	function onEachFeature(feature, layer) {
		layer.on({
			mouseover: highlightFeature,
			mouseout: resetHighlight,
			click: zoomToFeature
		});
		   if (feature.properties && feature.properties.popupContent) {
        layer.bindPopup(feature.properties.popupContent);
    }
};

$.getJSON("data/polygon_test.geojson",function(geojson2){
// add GeoJSON layer to the map once the file is loaded
    var datalayer = L.Proj.geoJson(geojson2 ,{
	     style:style,
             onEachFeature: onEachFeature
             }).addTo(map);
	     map.fitBounds(datalayer.getBounds());
  		});


})
  
 
</script>

  

  

</body>

</html>
